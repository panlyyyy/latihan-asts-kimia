<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan ASTS Kimia - Steven Arthur</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        .option-card:active { transform: scale(0.98); }
        .glass-header { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        /* Perbaikan Watermark agar presisi di tengah */
        .watermark { 
            position: fixed; 
            bottom: 20px; 
            left: 0;
            right: 0;
            text-align: center;
            font-weight: 800; 
            letter-spacing: 0.2em; 
            color: rgba(226, 232, 240, 0.8); 
            pointer-events: none; 
            z-index: 10; 
            font-size: 10px; 
            text-transform: uppercase; 
        }

        #overlay.active { opacity: 1; pointer-events: auto; backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); }
        .nav-unanswered { background: white; border-color: #f1f5f9; color: #cbd5e1; }
        .nav-answered { background: #4f46e5; border-color: #4f46e5; color: white; }
        .nav-doubt-only { background: white; border-color: #f59e0b; color: #f59e0b; }
        .nav-answered-doubt { background: #4f46e5; border-color: #f59e0b; color: white; border-width: 3px; }
        mjx-container { font-size: 1.1em !important; }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900 overflow-hidden h-screen flex flex-col">

    <div class="watermark">LATIHAN SOAL PERSIAPAN ASTS KIMIA KELAS XI</div>

    <!-- Loader -->
    <div id="loader" class="fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="w-10 h-10 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"></div>
        <p class="mt-4 text-slate-400 text-xs font-bold uppercase tracking-widest">Memuat Soal...</p>
    </div>

    <!-- Header -->
    <header class="glass-header sticky top-0 z-50 h-16 border-b border-slate-200 flex items-center justify-between px-4 lg:px-10 shrink-0">
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 bg-gradient-to-tr from-indigo-600 to-violet-600 rounded-xl flex items-center justify-center text-white shadow-lg">
                <i data-lucide="beaker" class="w-5 h-5"></i>
            </div>
            <div>
                <h1 class="font-extrabold text-xs sm:text-sm tracking-tight text-slate-800 uppercase leading-none">Latihan ASTS KIMIA XI</h1>
                <p class="text-[9px] sm:text-[10px] text-slate-400 font-bold uppercase tracking-wider mt-1">Steven Arthur XI-E</p>
            </div>
        </div>

        <div class="flex items-center gap-2">
            <div id="timer-box" class="flex items-center gap-2 px-3 py-1.5 bg-slate-100 rounded-full border border-slate-200 font-mono font-bold text-xs text-slate-700">
                <i data-lucide="clock" class="w-3.5 h-3.5 text-indigo-500"></i>
                <span id="timer-display">02:00:00</span>
            </div>
            <button onclick="toggleSidebar()" class="lg:hidden p-2 bg-white border border-slate-200 rounded-xl text-slate-600">
                <i data-lucide="layout-grid" class="w-5 h-5"></i>
            </button>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <main class="flex-1 overflow-y-auto custom-scrollbar p-4 lg:p-10">
            <div class="max-w-3xl mx-auto space-y-6 pb-20">
                <div id="question-card" class="bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden">
                    <div class="h-1.5 w-full bg-slate-100">
                        <div id="top-progress" class="h-full bg-indigo-600 transition-all duration-500" style="width: 0%"></div>
                    </div>
                    
                    <div class="px-6 py-4 border-b border-slate-50 flex items-center justify-between">
                        <span id="q-number-tag" class="px-3 py-1 bg-indigo-50 text-indigo-700 rounded-lg text-[10px] font-black uppercase tracking-wider">SOAL 1</span>
                        <div class="flex items-center gap-2">
                            <span id="correction-badge" class="hidden px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider"></span>
                            <button onclick="toggleDoubt()" id="btn-doubt" class="flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all border border-slate-200 text-slate-400">
                                <i data-lucide="flag" class="w-3.5 h-3.5"></i>
                                <span id="doubt-text">RAGU-RAGU</span>
                            </button>
                        </div>
                    </div>

                    <div id="content-area" class="p-6 lg:p-8 space-y-6 animate-fade-in">
                        <h2 id="q-text" class="text-lg lg:text-xl font-bold text-slate-800 leading-relaxed"></h2>
                        
                        <div id="q-table-container" class="hidden overflow-x-auto rounded-xl border border-slate-200 bg-slate-50">
                            <table class="w-full text-xs text-left">
                                <thead id="table-head" class="bg-slate-100 border-b border-slate-200"></thead>
                                <tbody id="table-body" class="divide-y divide-slate-200"></tbody>
                            </table>
                        </div>

                        <div id="q-sub" class="hidden p-4 bg-indigo-50/50 rounded-xl border-l-4 border-indigo-500">
                            <p class="text-indigo-900 font-semibold italic text-sm"></p>
                        </div>

                        <div id="options-grid" class="grid gap-3"></div>
                    </div>

                    <div class="px-6 py-4 bg-slate-50 border-t border-slate-100 flex items-center justify-between">
                        <button onclick="prevQ()" id="btn-prev" class="flex items-center gap-1 px-4 py-2 rounded-xl text-[10px] font-black text-slate-400 disabled:opacity-30 uppercase tracking-widest">
                            <i data-lucide="chevron-left" class="w-4 h-4"></i> Kembali
                        </button>
                        <div class="flex gap-2">
                            <button onclick="nextQ()" id="btn-next" class="flex items-center gap-2 px-6 py-2.5 bg-slate-900 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg">
                                Lanjut <i data-lucide="chevron-right" class="w-4 h-4"></i>
                            </button>
                            <button onclick="finishExam()" id="btn-finish" class="hidden flex items-center gap-2 px-6 py-2.5 bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg">
                                Selesai <i data-lucide="send" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <aside id="sidebar" class="fixed inset-y-0 right-0 lg:relative translate-x-full lg:translate-x-0 w-72 bg-white border-l border-slate-200 transition-transform duration-300 z-[70] flex flex-col">
            <div class="p-5 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-extrabold text-xs text-slate-800 uppercase tracking-widest">Navigasi Soal</h3>
                <button onclick="toggleSidebar()" class="lg:hidden text-slate-400 p-1"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto p-4 custom-scrollbar bg-slate-50/30">
                <div id="grid-nav" class="grid grid-cols-5 gap-2"></div>
            </div>
            <div class="p-5 bg-white border-t border-slate-200">
                <button id="main-submit-btn" onclick="finishExam()" class="w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-lg flex items-center justify-center gap-2">
                    Kumpulkan <i data-lucide="check-circle" class="w-3.5 h-3.5"></i>
                </button>
            </div>
        </aside>

        <div id="overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-slate-900/40 z-[60] opacity-0 pointer-events-none transition-all duration-300 lg:hidden"></div>
    </div>

    <!-- Result Modal -->
    <div id="modal-result" class="fixed inset-0 z-[200] hidden flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm">
        <div class="bg-white rounded-[32px] shadow-2xl w-full max-w-sm overflow-hidden transform animate-fade-in text-center">
            <div class="bg-indigo-600 p-8 text-white">
                <h2 class="text-lg font-bold">Hasil Akhir</h2>
                <div id="final-score" class="text-7xl font-black my-2">0</div>
                <p class="text-[10px] font-bold uppercase tracking-widest opacity-70">Skor Kompetensi</p>
            </div>
            <div class="p-6 space-y-3">
                <button onclick="closeResult()" class="w-full py-3 bg-indigo-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest">Lihat Koreksi</button>
                <button onclick="location.reload()" class="w-full py-3 bg-slate-100 text-slate-600 rounded-xl font-bold text-[10px] uppercase tracking-widest">Ulangi Sesi</button>
            </div>
        </div>
    </div>

    <script>
        const MASTER_DATA = [
            { id: 1, question: "Perhatikan data berikut :", hasTable: true, tableData: { headers: ["Larutan", "Lakmus Biru", "Lakmus Merah"], rows: [["1", "merah", "biru"], ["2", "biru", "biru"], ["3", "biru", "biru"], ["4", "merah", "merah"], ["5", "merah", "merah"]] }, subQuestion: "Larutan yang mengandung ion $OH^-$ nya lebih banyak daripada ion $H^+$ adalah ....", options: ["1 dan 2", "1 dan 5", "2 dan 3", "2 dan 4", "3 dan 4"], answer: "C" },
            { id: 2, question: "Perhatikan data berikut :", hasTable: true, tableData: { headers: ["Indikator", "Trayek / warna", "Hasil uji larutan"], rows: [["Metil merah", "4,2 – 6,3 / merah – kuning", "Kuning"], ["Metil jingga", "2,9 – 4,0 / merah – kuning", "Kuning"], ["Bromtimol biru", "6,0 – 7,6 / kuning – biru", "Biru"], ["Fenolftalein", "8,3 – 10 / tak berwarna – merah", "Tak berwarna"]] }, subQuestion: "Berdasarkan hasil uji, pH larutan sekitar ......", options: ["2", "6", "7", "8", "10"], answer: "D" },
            { id: 3, question: "Data trayek pH dan perubahan warna beberapa indikator sebagai berikut :", hasTable: true, tableData: { headers: ["Indikator", "Trayek / warna"], rows: [["Metil merah", "4,2 – 6,3 / merah – kuning"], ["Metil jingga", "2,9 – 4,0 / merah – kuning"], ["Bromtimol biru", "6,0 – 7,6 / kuning – biru"], ["Fenolftalein", "8,3 – 10 / tak berwarna – merah"]] }, subQuestion: "Warna yang terjadi jika diteteskan larutan dengan pH = 7,8 adalah .....", options: ["metil merah (merah) dan metil jingga (kuning)", "metil jingga (kuning) dan bromtimol biru (kuning)", "bromtimol biru (biru) dan fenolftalein (tak berwarna)", "bromtimol biru (kuning) dan fenolftalein (merah)", "metil merah (kuning) dan bromtimol biru (kuning)"], answer: "C" },
            { id: 4, question: "Diketahui reaksi sebagai berikut : $H_2O + CH_3COO^- \\rightleftharpoons CH_3COOH + OH^-$", subQuestion: "Pasangan basa- asam konjugasi menurut teori asam-basa Bronsted-Lowry adalah ....", options: ["$H_2O$ dan $CH_3COO^-$", "$CH_3COOH$ dan $H_2O$", "$CH_3COOH$ dan $H_2O$", "$CH_3COO^-$ dan $CH_3COOH$", "$CH_3COOH$ dan $OH^-$"], answer: "D" },
            { id: 5, question: "Perhatikan reaksi berikut : $H^+ + H_2O \\to H_3O^+$", subQuestion: "Pernyataan berikut yang sesuai dengan teori Lewis adalah .....", options: ["ion $H^+$ adalah asam", "$H_2O$ bersifat asam", "$H_2O$ bersifat netral", "ion $H^+$ bersifat basa", "$H_3O^+$ netral"], answer: "A" },
            { id: 6, question: "Jika 100 ml larutan $H_2SO_4$ 0,2 M dicampur dengan 100 ml larutan $H_2SO_4$ 0,3 M, konsentrasi $H^+$ dalam campuran adalah ....", options: ["0,2 M", "0,25 M", "0,3 M", "0,4 M", "0,5 M"], answer: "E" },
            { id: 7, question: "Larutan asam sulfat memiliki massa jenis 1,8 g/ml. Konsentrasi larutan asam sulfat dengan kadar 49% adalah ($Ar$ $O = 16, S = 32, H = 1$)", options: ["0,9 M", "1,8 M", "9 M", "2,5 M", "18 M"], answer: "C" },
            { id: 8, question: "Larutan NaOH dalam air mengandung 10% massa NaOH ($Mr = 40$), maka molaritas 100 ml NaOH tersebut adalah .....", options: ["1/10", "1/100", "1,1", "1,3", "2,5"], answer: "E" },
            { id: 9, question: "Sebanyak 0,74 gram $Ca(OH)_2$ dilarutkan dalam 500 ml larutan, pH larutan yang terjadi adalah ..... ($Ar$ $Ca = 40, O = 16, H = 1$)", options: ["2 – log 4", "2 + log 4", "11 + log 4", "12 + log 4", "12 + log 2"], answer: "D" },
            { id: 10, question: "Larutan asam asetat mempunyai pH = 3 dan Ka = $10^{-5}$ ($Mr = 60$) maka massa asam asetat dalam 500 ml larutan adalah .... gram", options: ["0,3", "0,6", "3", "6", "30"], answer: "C" },
            { id: 11, question: "Suatu larutan asam metanoat 0,1 M memiliki pH = 2. Derajat disosiasi asam adalah .....", options: ["0,01", "0,001", "0,1", "0,2", "30"], answer: "C" },
            { id: 12, question: "Volume air yang harus ditambahkan ke dalam 10 ml larutan HCl yang memiliki pH = 1 agar pH menjadi 2 adalah .....", options: ["10 ml", "20 ml", "90 ml", "100 ml", "990 ml"], answer: "C" },
            { id: 13, question: "Jika 300 ml larutan HCl 0,1 M dicampur dengan 200 ml $H_2SO_4$ 0,05 M maka akan diperoleh campuran dengan pH .....", options: ["1", "1 – log 2", "2", "2 – log 5", "3"], answer: "A" },
            { id: 14, question: "Jika dicampurkan 800 ml HCl 0,01 M dengan 200 ml NaOH 0,02 M, maka pH campurannya .....", options: ["12", "4", "3 + log 4", "3 – log 4", "3"], answer: "D" },
            { id: 15, question: "Untuk mendapatkan larutan dengan pH = 12 maka ke dalam 700 ml larutan KOH 0,1 M harus ditambahkan larutan $H_2SO_4$ 0,1 M sebanyak .......", options: ["100 ml", "300 ml", "500 ml", "700 ml", "1000 ml"], answer: "B" },
            { id: 16, question: "Perhatikan data berikut :", hasTable: true, tableData: { headers: ["Larutan", "Lakmus Biru", "Lakmus Merah"], rows: [["1", "merah", "biru"], ["2", "biru", "biru"], ["3", "biru", "biru"], ["4", "merah", "merah"], ["5", "merah", "merah"]] }, subQuestion: "Larutan yang mengandung ion $H^+$ lebih banyak daripada ion $OH^-$ adalah .....", options: ["1 dan 2", "1 dan 5", "2 dan 3", "2 dan 4", "4 dan 5"], answer: "E" },
            { id: 17, question: "Perhatikan data berikut :", hasTable: true, tableData: { headers: ["Indikator", "Trayek / warna", "Hasil uji larutan"], rows: [["Metil merah", "4,2 – 6,3 / merah – kuning", "Kuning"], ["Metil jingga", "2,9 – 4,0 / merah – kuning", "Kuning"], ["Bromtimol biru", "6,0 – 7,6 / kuning – biru", "Biru"], ["Fenolftalein", "8,3 – 10 / tak berwarna – merah", "Tak berwarna"]] }, subQuestion: "Berdasarkan hasil uji, pH larutan sekitar .....", options: ["2", "4", "7", "8", "di atas 10"], answer: "D" },
            { id: 18, question: "Basa konjugasi dari $NH_3$ adalah .....", options: ["NH4OH", "NH2+", "NH2–", "H2O", "NH4+"], answer: "C" },
            { id: 19, question: "Diantara spesi berikut yang tidak mungkin sebagai asam Bronsted-Lowry adalah .....", options: ["H2O", "NH4+", "HClO4", "CN–", "H2PO4–"], answer: "D" },
            { id: 20, question: "NaH larut dalam air menurut persamaan reaksi : $H^- + H_2O \\to OH^- + H_2$", subQuestion: "Pasangan asam-basa konjugas menurut teori asam basa Bronsted-Lowry adalah .......", options: ["H– dan H2O", "H2O dan OH–", "H2 dan H2O", "H+ dan OH–", "H2 dan OH–"], answer: "B" },
            { id: 21, question: "Perhatikan reaksi berikut : $H^+ + NH_3 \\to NH_4^+$", subQuestion: "Pernyataan berikut yang sesuai dengan teori Lewis adalah .......", options: ["ion $H^+$ adalah basa", "$NH_3$ bersifat basa", "$NH_4^+$ bersifat asam", "ion $H^+$ bersifat netral", "NH3 netral"], answer: "B" },
            { id: 22, question: "Perhatikan tabel berikut :", hasTable: true, tableData: { headers: ["Asam", "Ka"], rows: [["HA", "6,2 x 10–8"], ["HB", "7,5 x 10–2"], ["HC", "1,2 x 10–2"], ["HD", "1,8 x 10–12"], ["HE", "6,7 x 10–5"]] }, subQuestion: "Berdasarkan tabel di atas urutan kekuatan asam dari yang lemah adalah .......", options: ["HA – HB – HC – HD – HE", "HD – HA – HE – HC – HB", "HC – HB – HD – HE – HA", "HB – HC – HE – HA – HD", "HD – HA – HE – HB – HC"], answer: "B" },
            { id: 23, question: "Derajat keasaman dari 100 ml $H_2SO_4$ $10^{-8}$ M adalah .......", options: ["6 + log 2", "7 – log 1,2", "7 + log 1,2", "8 – log 2", "8"], answer: "B" },
            { id: 24, question: "Pada suhu dan tekanan tertentu, harga tetapan kesetimbangan air, $Kw = 5 \\cdot 10^{-13}$.", subQuestion: "Pada suhu dan tekanan yang sama jumlah ($H^+$) dan pH larutan $Ca(OH)_2$ 0,0005 M adalah ......", options: ["$5 \\times 10^{-10}$ M dan pH = 10 – log 5", "10–9 dan pH = 9", "10–3 dan pH = 3", "10–10 dan pH = 10", "5 x 10–10 pH = 10 + log 5"], answer: "A" },
            { id: 25, question: "Sebanyak 10 mL larutan asam asetat dengan pH = 3 dicampur air 90 ml. Berapakah pH larutan sekarang ? (Ka = 10–5)", options: ["2", "2,5", "3", "3,5", "4"], answer: "D" },
            { id: 26, question: "pH suatu larutan basa lemah valensi satu = 10, maka konsentrasi ion $OH^-$ dalam larutan adalah", options: ["10–10 M", "10–8 M", "10–6 M", "10–5 M", "10–4 M"], answer: "E" },
            { id: 27, question: "Manakah oksida-oksida berikut yang jika dilarutkan dalam air akan menghasilkan asam ?", options: ["MgO", "SO3", "FeO", "ZnO", "K2O"], answer: "B" },
            { id: 28, question: "Pada reaksi : $NH_3(aq) + H_2O(l) \\to NH_4^+(aq) + OH^-(aq)$", subQuestion: "Pasangan basa asam konjugasinya adalah ......", options: ["NH3/H2O", "NH4 /OH", "NH3/OH–", "NH4 /H2O", "NH3/NH4"], answer: "E" },
            { id: 29, question: "Ion $HCO_3^-$ bersifat amfiprotik yakni bisa bersifat asam maupun basa.", subQuestion: "Reaksi manakah yang menunjukkan $HCO_3^-$ bersifat basa ?", options: ["$HCO_3^- + H_2O \\to H_2CO_3 + OH^-$", "$HCO_3^- + OH^- \\to CO_3^{2-} + H_2O$", "$HCO_3^- + NH_3 \\to CO_3^{2-} + NH_4^+$", "$HCO_3^- \\to H^+ + CO_3^{2-}$", "$HCO_3^- + H_2O \\to CO_3^{2-} + H_3O^+$"], answer: "A" },
            { id: 30, question: "Air pada suhu 25°C memiliki $[H^+] = [OH^-]$. Jika pada suhu tetap ke dalam air ditambahkan asam, maka pernyataan yang benar adalah .......", options: ["$[H^+] < [OH^-]$", "$[H^+] = [OH^-]$", "$[H^+] > [OH^-]$", "pH bertambah besar", "$[OH^-]$ bertambah"], answer: "C" },
            { id: 31, question: "Perhatikan data hasil percobaan titrasi larutan NaOH dengan larutan $H_2SO_4$ 0,2 M berikut ini :", hasTable: true, tableData: { headers: ["Percobaan", "Volume NaOH (mL)", "Volume H2SO4 (mL)"], rows: [["1", "15", "7,60"], ["2", "15", "7,50"], ["3", "15", "7,40"]] }, subQuestion: "Dari data tersebut maka konsentrasi larutan NaOH adalah ………", options: ["0,1 M", "0,2 M", "0,3 M", "0,4 M", "0,5 M"], answer: "B" },
            { id: 32, question: "Sebanyak 2 gram cuplikan NaOH dilarutkan dalam 250 mL air. Kemudian 20 mL larutan ini dititrasi dengan larutan HCl 0,1 M.", subQuestion: "Kadar NaOH dalam cuplikan tersebut adalah ……… ($Mr$ NaOH = 40)", options: ["20%", "25%", "40%", "62,5%", "75%"], answer: "D" },
            { id: 33, question: "Pada percobaan titrasi larutan $CH_3COOH$ dengan larutan NaOH.", subQuestion: "Karakteristik grafik yang menunjukkan hasil titrasi tersebut adalah ………", options: ["pH awal < 7, ekivalen pH > 7", "pH awal < 7, ekivalen pH = 7", "pH awal < 7, ekivalen pH < 7", "Kurva linear naik", "Kurva linear turun"], answer: "D" },
            { id: 34, question: "Pada percobaan titrasi larutan HCl dengan larutan NaOH berlangsung reaksi : $HCl + NaOH \\to NaCl + H_2O$.", subQuestion: "Karakteristik kurva yang menunjukkkan hasil titrasi tersebut adalah ………", options: ["pH awal sekitar 1, titik ekivalen pH 7", "pH awal sekitar 7, titik ekivalen pH 14", "pH awal sekitar 1, titik ekivalen pH 10", "pH awal sekitar 12, titik ekivalen pH 7", "Kurva selalu datar"], answer: "A" },
            { id: 35, question: "Berikut data hasil titrasi larutan HCl dengan larutan $Ba(OH)_2$ 0,2 M :", hasTable: true, tableData: { headers: ["Percobaan", "Volume larutan HCl", "Volume larutan Ba(OH)2"], rows: [["1", "15 mL", "30 mL"], ["2", "15 mL", "29 mL"], ["3", "15 mL", "31 mL"]] }, subQuestion: "Berdasarkan data tersebut, konsentrasi larutan HCl adalah ……… M.", options: ["0,2", "0,4", "0,6", "0,8", "1,0"], answer: "D" },
            { id: 36, question: "Jika volume larutan asam HX yang dititrasi sebanyak 20 mL dengan basa kuat 0,1 M (ekivalen di 25 mL):", subQuestion: "konsentrasi larutan asam HX itu adalah .......", options: ["0,075 M", "0,125 M", "0,08 M", "0,25 M", "0,10 M"], answer: "B" },
            { id: 37, question: "Jika volume larutan basa LOH yang dititrasi sebanyak 10 mL oleh asam kuat 0,1 M (ekivalen di 25 mL):", subQuestion: "konsentrasi larutan basa LOH itu adalah ......", options: ["0,25 M", "0,125 M", "0,1 M", "0,075 M", "0,025 M"], answer: "A" },
            { id: 38, question: "Data titrasi 10 mL larutan NaOH 0,1 M dengan larutan $H_2SO_4$ (rata-rata volume asam 5 mL):", subQuestion: "Massa $H_2SO_4$ yang bereaksi pada titrasi tersebut adalah ……… ($Mr$ $H_2SO_4 = 98$)", options: ["0,049 gram", "9,800 gram", "19,600 gram", "29,400 gram", "98,000 gram"], answer: "A" },
            { id: 39, question: "Data titrasi 25 mL larutan $H_2SO_4$ 0,1 M dengan larutan KOH (rata-rata volume KOH 20 mL):", subQuestion: "Massa KOH yang bereaksi adalah …… ($Mr$ KOH = 56)", options: ["0,14 gram", "0,28 gram", "1,4 gram", "2,80 gram", "14,0 gram"], answer: "B" },
            { id: 40, question: "Titrasi 10 mL larutan $HNO_3$ 0,1 M oleh larutan NaOH (titik akhir dicapai setelah penambahan 20 mL NaOH):", subQuestion: "Massa NaOH terlarut dalam 20 mL larutan NaOH tersebut adalah ………", options: ["0,04 gram", "0,08 gram", "0,4 gram", "0,8 gram", "4 gram"], answer: "A" },
            { id: 41, question: "Sebanyak 8 gram kristal NaOH dilarutkan dalam 1 liter larutan HCN 0,3 M ($Ka = 2 \\times 10^{-5}, Ar$ $Na = 23$):", subQuestion: "besarnya pH campuran adalah .....", options: ["5 – log 2", "5", "6 – log 2", "9 + log 2", "10"], answer: "B" },
            { id: 42, question: "Sebanyak 50 mL larutan $NH_4OH$ 0,01 M ($Kb = 10^{-6}$) dicampur dengan 100 mL larutan $NH_4Cl$ 0,5 M.", subQuestion: "pH campurannya adalah .......", options: ["5", "6", "7", "8", "9"], answer: "B" },
            { id: 43, question: "Larutan 100 mL $CH_3COOH$ 0,15 M dicampurkan dengan 50 mL larutan KOH 0,2 M ($Ka = 10^{-5}$):", subQuestion: "pH campuran adalah ......", options: ["3 – log 6", "6 – log 5", "5 – log 3", "6 – log 3", "3 – log 5"], answer: "B" },
            { id: 44, question: "Sebanyak 100 mL larutan $NH_3$ 0,8 M dicampurkan dengan 50 mL larutan HCl 0,2 M ($Kb = 10^{-4}$):", subQuestion: "pH campuran adalah .......", options: ["5 – log 3", "4 + log 3", "10 – log 3", "9 + log 3", "10 + log 7"], answer: "E" },
            { id: 45, question: "Pada 1 liter larutan asam lemah HA 0,3 M ($Ka = 2 \\times 10^{-5}$) ditambah 0,2 mol KOH padat:", subQuestion: "pH larutan menjadi .......", options: ["4 – log 2", "4", "5", "5 – log 2", "9"], answer: "C" },
            { id: 46, question: "Campuran buffer yang dapat mempertahankan pH darah dalam tubuh kita adalah .......", options: ["HCN/CN–", "HCl/Cl–", "H2CO3/HCO3–", "CH3COOH/CH3COO–", "HCOOH/HCCO–"], answer: "C" },
            { id: 47, question: "Larutan buffer dapat dibuat dengan mencampurkan 100 mL larutan $CH_3COOH$ 0,1 M dengan larutan .......", options: ["80 mL natrium hidroksida 0,1 M", "100 mL natrium hidroksida 0,1 M", "120 mL natrium hidroksida 0,1 M", "50 mL asam klorida 0,1 M", "100 mL asam klorida 0,1 M"], answer: "A" },
            { id: 48, question: "Campuran larutan di bawah ini yang merupakan campuran buffer adalah .......", options: ["50 mL HCl 0,5 M + 50 mL NaOH 0,1 M", "50 mL HCl 0,5 M + 50 mL NH4OH 0,5 M", "50 mL HCl 0,2 M + 50 mL NH4OH 0,5 M", "50 mL HCl 0,5 M + 50 mL NH4OH 0,1 M", "50 mL HCl 0,1 M + 50 mL NaOH 0,5 M"], answer: "C" },
            { id: 49, question: "Ke dalam 300 mL larutan $CH_3COOH$ 0,1 M dicampurkan 50 mL larutan NaOH 0,2 M ($Ka = 10^{-5}$):", subQuestion: "pH larutan akan berubah dari .......", options: ["3 menjadi 13 – log 2", "1 menjadi 5", "3 menjadi 5 – log 2", "1 menjadi 13 – log 2", "3 menjadi 14"], answer: "C" },
            { id: 50, question: "Bila larutan $NH_3$ dan HCl dengan konsentrasi yang sama dicampurkan akan didapat larutan yang mempunyai harga pH = 9 ($Kb = 10^{-5}$):", subQuestion: "perbandingan volume kedua larutan tersebut adalah ..", options: ["1 : 1", "1 : 2", "2 : 1", "3 : 2", "3 : 4"], answer: "C" },
            { id: 51, question: "Pada 1 liter larutan asam lemah HA 0,3 M ($Ka = 2 \\times 10^{-5}$) ditambah 0,2 mol NaOH padat:", subQuestion: "pH campuran menjadi .......", options: ["3 – log 2", "4", "5 – log 2", "5", "6"], answer: "D" },
            { id: 52, question: "Ke dalam 1 liter larutan asam asetat 0,1 M ($pH = 3$) ditambahkan garam natrium asetat supaya pH menjadi dua kali semula ($Ka = 10^{-5}$):", subQuestion: "Garam yang ditambahkan sebanyak .......", options: ["0,0001 mol", "0,001 mol", "0,01 mol", "0,1 mol", "1,0 mol"], answer: "E" },
            { id: 53, question: "Massa amonium sulfat $(NH_4)_2SO_4$ dalam 200 mL larutan $NH_3$ 0,1 M, agar pH = 9 + log 2 ($Kb = 10^{-5}, Mr = 132$):", options: ["330 mg", "660 mg", "132 mg", "464 mg", "960 mg"], answer: "B" },
            { id: 54, question: "Volume KOH 0,1 M yang harus ditambahkan ke dalam 50 mL larutan asam asetat 0,3 M agar diperoleh larutan penyangga dengan pH = 5 – log 2 ($Ka = 10^{-5}$):", options: ["15 mL", "25 mL", "30 mL", "50 mL", "75 mL"], answer: "D" },
            { id: 55, question: "Besarnya pH campuran dari 100 mL larutan $NH_3$ 0,4 M yang dicampurkan dengan 50 mL $H_2SO_4$ 0,2 M ($Kb = 10^{-5}$):", options: ["5", "5 – log 2", "8 + log 2", "9", "9 + log 2"], answer: "D" },
            { id: 56, question: "Larutan penyangga merupakan campuran dari ......", options: ["basa kuat dengan asam lemah", "basa kuat dengan garamnya", "basa lemah dengan garamnya", "asam kuat dengan garamnya", "asam lemah dengan basa lemah"], answer: "C" },
            { id: 57, question: "Perhatikan tabel perubahan pH larutan berikut:", hasTable: true, tableData: { headers: ["Larutan", "Air", "Asam kuat", "Basa kuat"], rows: [["1", "2,48", "2,32", "13,45"], ["2", "2,32", "1,70", "13,01"], ["3", "4,73", "4,66", "12,52"], ["4", "4,75", "4,76", "4,76"], ["5", "4,75", "1,45", "12,55"]] }, subQuestion: "Larutan yang mempunyai sifat penyangga adalah .......", options: ["1", "2", "3", "4", "5"], answer: "D" },
            { id: 58, question: "Daftar campuran larutan:", subQuestion: "Campuran yang membentuk penyangga yang bersifat asam adalah .......", options: ["100 mL HCl + 50 mL NaOH", "100 mL $CH_3COOH$ + 50 mL $CH_3COOH$", "100 mL $H_2SO_4$ + 50 mL NaOH", "100 mL $CH_3COOH$ + 50 mL NaOH", "100 mL $NH_4OH$ + 50 mL HCl"], answer: "D" },
            { id: 59, question: "Sebanyak 20 mL larutan $NH_3$ 0,30 M ($Kb = 10^{-5}$) dicampur dengan 40 mL larutan HCl 0,10 M.", subQuestion: "pH campuran adalah .......", options: ["1", "3", "4,301", "8,669", "9,301"], answer: "D" },
            { id: 60, question: "Larutan 25 mL $NH_4OH$ 0,2 M ($Kb = 10^{-5}$) dicampur dengan 25 mL larutan HCl 0,1 M.", subQuestion: "pH larutan yang terjadi adalah .......", options: ["5", "5,5", "8,5", "9", "13"], answer: "D" },
            { id: 61, question: "Satu liter larutan yang mengandung 0,1 mol $NH_3$ ($Kb = 10^{-5}$) dan 0,05 mol $(NH_4)_2SO_4$ mempunyai pH yaitu .......", options: ["5", "5 – log 2", "9", "9 – log 2", "9 + log 2"], answer: "C" },
            { id: 62, question: "Pasangan larutan berikut ini yang menghasilkan larutan penyangga adalah ......", options: ["50 mL $CH_3COOH$ 0,1 M + 50 mL NaOH 0,25 M", "50 mL $CH_3COOH$ 0,1 M + 50 mL HCl 0,1 M", "50 mL HCN 0,05 M + 50 mL NaOH 0,05 M", "50 mL $NH_4OH$ 0,1 M + 50 mL HCl 0,05 M", "50 mL NaOH 0,1 M + 50 mL HCl 0,1 M"], answer: "D" },
            { id: 63, question: "Larutan 20 mL HCOOH 0,3 M ($K = 2 \\times 10^{-5}$) dicampur dengan 40 mL larutan KOH 0,1 M.", subQuestion: "Harga pH larutan yang terjadi adalah .......", options: ["1", "3", "5", "8", "10"], answer: "C" },
            { id: 64, question: "pH campuran dari 200 mL $NH_4OH$ 0,1 M dengan 200 mL $NH_4Cl$ 0,1 M adalah ($Kb = 10^{-5}$):", options: ["5", "7", "9", "11", "13"], answer: "C" },
            { id: 65, question: "Jika kedalam 200 mL larutan $NH_4OH$ 0,2 M dicampurkan larutan $NH_4Cl$ dengan volume dan konsentrasi yang sama:", options: ["5", "6", "8", "9", "10"], answer: "D" },
            { id: 66, question: "Yang merupakan sistem penyangga dalam tubuh adalah .......", options: ["NH4OH dan NH4+", "Garam Dapur", "H2CO3/HCO3– dan H2PO4–/HPO4 2–", "Asam Cuka", "Asam Lambung"], answer: "D" },
            { id: 67, question: "Kegunaan larutan penyangga dalam bidang biologi adalah ......", options: ["untuk pembuatan obat-obatan", "untuk mengatur pH larutan", "untuk mengoptimalkan kerja", "untuk analisis kualitatif", "untuk analisis kuantitatif"], answer: "A" },
            { id: 68, question: "Di antara larutan berikut ini yang merupakan garam terhidrolisis parsial bersifat basa adalah .......", options: ["NaNO2", "(NH4)2SO4", "K3PO4", "AlCl3", "CaSO4"], answer: "C" },
            { id: 69, question: "Diantara garam berikut ini yang terhidrolisis total adalah .......", options: ["Cu(CH3COO)2", "Al2(SO4)3", "Fe(NO3)3", "NH4Cl", "NaCl"], answer: "A" },
            { id: 70, question: "Dari larutan berikut yang memiliki pH di bawah 7 adalah .......", options: ["(NH4)3PO4", "Ca(CH3COO)2", "NaCN", "NH4Cl", "KClO4"], answer: "D" },
            { id: 71, question: "Ion yang dapat mengalami hidrolisis adalah .......", options: ["NO3–", "Zn2+", "Ca2+", "Cl–", "H+"], answer: "B" },
            { id: 72, question: "Diketahui reaksi hidrolisisnya : $BH^+ + H_2O \\to B + H_3O^+$. Garam yang mengalami hidrolisis seperti di atas adalah .......", options: ["AlF3", "NH4Cl", "Ca(NO3)2", "(NH4)2CO3", "KI"], answer: "B" },
            { id: 73, question: "Perhatikan tabel uji lakmus garam berikut:", hasTable: true, tableData: { headers: ["Garam", "Lakmus Merah", "Lakmus Biru"], rows: [["1 (NH4)2SO4", "Biru", "Biru"], ["2 Al2(SO4)3", "Merah", "Biru"], ["3 Ca(NO2)2", "Biru", "Biru"], ["4 NH4F", "Merah", "Merah"], ["5 NH4Br", "Merah", "Merah"]] }, subQuestion: "Garam yang mengalami hidrolisis sesuai dengan hasil uji lakmusnya (Basa/Asam) .......", options: ["1 dan 2", "3 dan 5", "2 dan 4", "1 dan 3", "4 dan 5"], answer: "B" },
            { id: 74, question: "Peristiwa hidrolisis tidak terjadi pada larutan .......", options: ["AlF3", "Na3PO4", "Li2CO3", "BaBr2", "(NH4)2SO4"], answer: "D" },
            { id: 75, question: "Data perubahan pH penyangga:", hasTable: true, tableData: { headers: ["Larutan", "Air", "Asam kuat", "Basa kuat"], rows: [["1", "2,48", "2,32", "13,45"], ["2", "12,32", "12,29", "12,30"], ["3", "4,73", "4,66", "12,52"], ["4", "4,75", "4,76", "9,76"], ["5", "4,75", "1,45", "12,55"]] }, subQuestion: "Larutan yang mempunyai sifat penyangga adalah .......", options: ["1", "2", "3", "4", "5"], answer: "B" }
        ];

        let questions = [];
        let currentIdx = 0;
        let answers = {};
        let doubts = {};
        let timeLeft = 7200;
        let timerInterval;
        let isFinished = false;

        // Fungsi Shuffle Array
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function init() {
            // Mengacak Master Data sebelum dimasukkan ke variabel questions
            questions = shuffle([...MASTER_DATA]);
            
            renderSidebar();
            updateQuestion();
            startTimer();
            setTimeout(() => {
                document.getElementById('loader').classList.add('opacity-0');
                setTimeout(() => document.getElementById('loader').remove(), 500);
            }, 1000);
            lucide.createIcons();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                if(isFinished) return;
                timeLeft--;
                if (timeLeft <= 0) { clearInterval(timerInterval); finishExam(); }
                const h = Math.floor(timeLeft / 3600), m = Math.floor((timeLeft % 3600) / 60), s = timeLeft % 60;
                document.getElementById('timer-display').textContent = `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function updateQuestion() {
            const q = questions[currentIdx];
            document.getElementById('q-number-tag').textContent = `SOAL ${currentIdx + 1}`;
            document.getElementById('q-text').textContent = q.question;
            
            const sub = document.getElementById('q-sub');
            if(q.subQuestion) {
                sub.classList.remove('hidden');
                sub.querySelector('p').textContent = q.subQuestion;
            } else { sub.classList.add('hidden'); }

            const tableContainer = document.getElementById('q-table-container');
            if(q.hasTable) {
                tableContainer.classList.remove('hidden');
                document.getElementById('table-head').innerHTML = `<tr>${q.tableData.headers.map(h => `<th class="px-3 py-2 font-bold text-slate-500 uppercase text-[9px] tracking-wider">${h}</th>`).join('')}</tr>`;
                document.getElementById('table-body').innerHTML = q.tableData.rows.map(row => `<tr>${row.map(c => `<td class="px-3 py-2 text-slate-600 font-medium">${c}</td>`).join('')}</tr>`).join('');
            } else { tableContainer.classList.add('hidden'); }

            const optionsGrid = document.getElementById('options-grid');
            optionsGrid.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const char = String.fromCharCode(65 + i);
                const isSelected = answers[currentIdx] === char;
                const isCorrect = q.answer === char;
                
                let cardClass = "option-card flex items-center gap-4 p-4 rounded-2xl border-2 transition-all text-left ";
                let iconClass = "w-8 h-8 shrink-0 rounded-xl flex items-center justify-center font-black text-xs ";

                if(isFinished) {
                    if(isCorrect) {
                        cardClass += "border-emerald-500 bg-emerald-50";
                        iconClass += "bg-emerald-500 text-white";
                    } else if(isSelected && !isCorrect) {
                        cardClass += "border-rose-500 bg-rose-50";
                        iconClass += "bg-rose-500 text-white";
                    } else {
                        cardClass += "border-slate-100 bg-white opacity-60";
                        iconClass += "bg-slate-100 text-slate-400";
                    }
                } else {
                    if(isSelected) {
                        cardClass += "border-indigo-600 bg-indigo-50/50";
                        iconClass += "bg-indigo-600 text-white";
                    } else {
                        cardClass += "border-slate-100 bg-white hover:border-slate-200";
                        iconClass += "bg-slate-100 text-slate-400";
                    }
                }

                const btn = document.createElement('button');
                btn.className = cardClass;
                btn.disabled = isFinished;
                btn.onclick = () => selectOption(char);
                btn.innerHTML = `<div class="${iconClass}">${char}</div><span class="text-sm font-bold flex-1">${opt}</span>`;
                optionsGrid.appendChild(btn);
            });

            const badge = document.getElementById('correction-badge');
            if(isFinished) {
                badge.classList.remove('hidden');
                const userAns = answers[currentIdx];
                if(userAns === q.answer) {
                    badge.textContent = "BENAR";
                    badge.className = "px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider bg-emerald-100 text-emerald-700";
                } else {
                    badge.textContent = userAns ? "SALAH" : "KOSONG";
                    badge.className = "px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider bg-rose-100 text-rose-700";
                }
            } else {
                badge.classList.add('hidden');
            }

            document.getElementById('btn-prev').disabled = currentIdx === 0;
            if(currentIdx === questions.length - 1) {
                document.getElementById('btn-next').classList.add('hidden');
                if(!isFinished) document.getElementById('btn-finish').classList.remove('hidden');
            } else {
                document.getElementById('btn-next').classList.remove('hidden');
                document.getElementById('btn-finish').classList.add('hidden');
            }

            const btnDoubt = document.getElementById('btn-doubt');
            btnDoubt.className = doubts[currentIdx] ? "flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-black border border-amber-500 bg-amber-500 text-white" : "flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-black border border-slate-200 text-slate-400";
            document.getElementById('doubt-text').textContent = doubts[currentIdx] ? "DITANDAI RAGU" : "RAGU-RAGU";

            updateProgress();
            renderSidebar();
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function selectOption(char) { 
            if(isFinished) return;
            answers[currentIdx] = char; 
            updateQuestion(); 
        }

        function toggleDoubt() { 
            if(isFinished) return;
            doubts[currentIdx] = !doubts[currentIdx]; 
            updateQuestion(); 
        }

        function nextQ() { if(currentIdx < questions.length - 1) { currentIdx++; updateQuestion(); scrollToTop(); } }
        function prevQ() { if(currentIdx > 0) { currentIdx--; updateQuestion(); scrollToTop(); } }
        function jumpTo(idx) { currentIdx = idx; updateQuestion(); if(window.innerWidth < 1024) toggleSidebar(); scrollToTop(); }
        function scrollToTop() { document.querySelector('main').scrollTo({ top: 0, behavior: 'smooth' }); }
        
        function updateProgress() {
            const progress = (Object.keys(answers).length / questions.length) * 100;
            document.getElementById('top-progress').style.width = `${progress}%`;
        }

        function renderSidebar() {
            const grid = document.getElementById('grid-nav');
            grid.innerHTML = '';
            questions.forEach((q, i) => {
                const btn = document.createElement('button');
                const isAns = answers[i] !== undefined, isDbt = doubts[i] === true, isAct = currentIdx === i;
                
                let cls = "h-10 rounded-xl text-[10px] font-black transition-all border-2 ";
                
                if(isFinished) {
                    if(answers[i] === q.answer) cls += "bg-emerald-500 border-emerald-500 text-white ";
                    else if(answers[i]) cls += "bg-rose-500 border-rose-500 text-white ";
                    else cls += "bg-slate-200 border-slate-200 text-slate-500 ";
                } else {
                    if (isAns && isDbt) cls += "nav-answered-doubt ";
                    else if (isAns) cls += "nav-answered ";
                    else if (isDbt) cls += "nav-doubt-only ";
                    else cls += "nav-unanswered ";
                }
                
                if (isAct) cls += "ring-2 ring-indigo-400 ring-offset-2 ";
                btn.className = cls; btn.textContent = i + 1; btn.onclick = () => jumpTo(i);
                grid.appendChild(btn);
            });
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar'), overlay = document.getElementById('overlay');
            sidebar.classList.toggle('translate-x-full');
            overlay.classList.toggle('active');
        }

        function finishExam() {
            if(isFinished) return;
            clearInterval(timerInterval);
            isFinished = true;
            
            let correct = 0;
            questions.forEach((q, i) => { if(answers[i] === q.answer) correct++; });
            
            document.getElementById('final-score').textContent = Math.round((correct / questions.length) * 100);
            document.getElementById('modal-result').classList.remove('hidden');
            document.getElementById('timer-box').classList.add('hidden');
            document.getElementById('main-submit-btn').classList.add('hidden');
            document.getElementById('btn-finish').classList.add('hidden');
            
            updateQuestion();
        }

        function closeResult() {
            document.getElementById('modal-result').classList.add('hidden');
        }

        window.onload = init;
    </script>
</body>
</html>

